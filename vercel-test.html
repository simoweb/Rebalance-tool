<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Vercel Routing</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .test { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background: #d4edda; border-color: #c3e6cb; }
        .error { background: #f8d7da; border-color: #f5c6cb; }
        .warning { background: #fff3cd; border-color: #ffeaa7; }
        a { color: #007bff; text-decoration: none; font-weight: bold; }
        a:hover { text-decoration: underline; }
        .status { padding: 10px; border-radius: 5px; margin: 10px 0; }
        .status.success { background: #d4edda; color: #155724; }
        .status.error { background: #f8d7da; color: #721c24; }
        .status.warning { background: #fff3cd; color: #856404; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🚀 Test Routing Vercel</h1>
        
        <div class="test">
            <h3>📋 Informazioni Ambiente</h3>
            <p><strong>URL corrente:</strong> <span id="current-url"></span></p>
            <p><strong>Host:</strong> <span id="current-host"></span></p>
            <p><strong>Pathname:</strong> <span id="current-pathname"></span></p>
            <p><strong>Lingua rilevata:</strong> <span id="detected-language"></span></p>
        </div>
        
        <div class="test">
            <h3>🧪 Test di Navigazione</h3>
            <p><a href="/" target="_blank">🏠 Home Italiana (/)</a></p>
            <p><a href="/en" target="_blank">🇬🇧 Home Inglese (/en)</a></p>
            <p><a href="/index.html" target="_blank">📄 index.html diretto</a></p>
            <p><a href="/index-en.html" target="_blank">📄 index-en.html diretto</a></p>
        </div>
        
        <div class="test">
            <h3>🔍 Test con Parametri</h3>
            <p><a href="/?test=1" target="_blank">🏠 Italiano con parametro</a></p>
            <p><a href="/en?test=1" target="_blank">🇬🇧 Inglese con parametro</a></p>
        </div>
        
        <div class="test">
            <h3>⚓ Test con Anchor</h3>
            <p><a href="/#test" target="_blank">🏠 Italiano con anchor</a></p>
            <p><a href="/en#test" target="_blank">🇬🇧 Inglese con anchor</a></p>
        </div>
        
        <div class="test">
            <h3>🎯 Test Completo</h3>
            <p><a href="/?param=value#anchor" target="_blank">🏠 Italiano completo</a></p>
            <p><a href="/en?param=value#anchor" target="_blank">🇬🇧 Inglese completo</a></p>
        </div>
        
        <div class="test">
            <h3>📊 Risultati Test</h3>
            <div id="test-results"></div>
            <button onclick="runTests()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">🔍 Esegui Test</button>
        </div>
        
        <div class="test">
            <h3>📝 Note per Vercel</h3>
            <ul>
                <li>✅ File <code>vercel.json</code> configurato</li>
                <li>✅ Script <code>vercel-build</code> aggiunto</li>
                <li>✅ File <code>.vercelignore</code> creato</li>
                <li>✅ Routing configurato per <code>/en</code> → <code>index-en.html</code></li>
                <li>⚠️ Assicurati che il deploy includa tutti i file necessari</li>
            </ul>
        </div>
    </div>
    
    <script>
        // Aggiorna informazioni ambiente
        document.getElementById('current-url').textContent = window.location.href;
        document.getElementById('current-host').textContent = window.location.host;
        document.getElementById('current-pathname').textContent = window.location.pathname;
        
        const isEnglish = window.location.pathname.startsWith('/en');
        document.getElementById('detected-language').textContent = isEnglish ? '🇬🇧 Inglese' : '🏠 Italiano';
        
        // Funzione per testare i link
        async function testLink(url) {
            try {
                const response = await fetch(url, { method: 'HEAD' });
                return response.ok;
            } catch (error) {
                return false;
            }
        }
        
        async function runTests() {
            const results = document.getElementById('test-results');
            results.innerHTML = '<div class="status warning">🔄 Esecuzione test in corso...</div>';
            
            const tests = [
                { name: 'Home Italiana', url: '/' },
                { name: 'Home Inglese', url: '/en' },
                { name: 'index.html diretto', url: '/index.html' },
                { name: 'index-en.html diretto', url: '/index-en.html' }
            ];
            
            let resultsHtml = '';
            
            for (const test of tests) {
                const success = await testLink(test.url);
                const statusClass = success ? 'success' : 'error';
                const statusIcon = success ? '✅' : '❌';
                
                resultsHtml += `
                    <div class="status ${statusClass}">
                        ${statusIcon} ${test.name}: ${success ? 'OK' : 'FAIL'} (${test.url})
                    </div>
                `;
            }
            
            results.innerHTML = resultsHtml;
        }
        
        // Test automatico al caricamento
        setTimeout(runTests, 1000);
    </script>
</body>
</html> 